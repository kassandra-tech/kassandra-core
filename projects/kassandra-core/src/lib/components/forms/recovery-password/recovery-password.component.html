<ng-container *ngIf="recoveryPasswordForm">
  <form class="form"
        autocomplete="off"
        id="recovery-password-form"
        [ngClass]="{valid: recoveryPasswordForm.valid}"
        [formGroup]="recoveryPasswordForm"
        (ngSubmit)="onSubmit(recoveryPasswordForm.value)"
  >
    <fieldset class="form-content">
      <legend class="title">Forgot Account Credentials</legend>
      <legend class="sub-title">
        Please enter your Username or Password and your Security Token to recover your account credentials.
      </legend>
      <label class="input-group" [for]="ids.usernameField"
             [ngClass]="{'error': recoveryPasswordForm.get('userName')?.touched &&
                                  recoveryPasswordForm.get('userName')?.dirty &&
                                  recoveryPasswordForm.get('userName')?.invalid
             }"
      >
        <span class="label-text">Username</span>
        <div class="input-wrapper">
          <input kas-form-item
                 type="text"
                 [id]="ids.usernameField"
                 name="userName"
                 formControlName="userName"
                 placeholder="Enter your username"
          >
        </div>
        <div *ngIf="recoveryPasswordForm.get('userName')?.touched &&
                    recoveryPasswordForm.get('userName')?.dirty &&
                    recoveryPasswordForm.get('userName')?.invalid"
             class="alert alert-danger"
        >
          <div *ngIf="recoveryPasswordForm.get('userName')?.errors?.['required']">
            Username required
          </div>
          <div *ngIf="recoveryPasswordForm.get('userName')?.errors?.['minlength']">
            Username must be at least 5 characters
          </div>
        </div>
      </label>
      <label class="input-group" [for]="ids.passwordField"
             [ngClass]="{'error': recoveryPasswordForm.get('password')?.touched &&
                                  recoveryPasswordForm.get('password')?.dirty &&
                                  recoveryPasswordForm.get('password')?.invalid
             }"
      >
        <span class="label-text">Password</span>
        <div class="input-wrapper">
          <!--   needs init value for type after binding   -->
          <input kas-form-item
                 type="password"
                 [type]="showPassword ? 'text' : 'password'"
                 [id]="ids.passwordField"
                 name="password"
                 formControlName="password"
                 placeholder="Password"
          >
          <button kas-cta
                  type="button"
                  class="toggle-show-password"
                  [id]="ids.showPasswordButton"
                  (click)="showPassword = !showPassword">
            {{showPassword ? 'HIDE' : 'SHOW'}}
          </button>
        </div>
        <div *ngIf="recoveryPasswordForm.get('password')?.touched &&
                    recoveryPasswordForm.get('password')?.dirty &&
                    recoveryPasswordForm.get('password')?.invalid"
             class="alert alert-danger"
        >
          <div *ngIf="recoveryPasswordForm.get('password')?.errors?.['required']">
            Password is required.
          </div>
          <div *ngIf="recoveryPasswordForm.get('password')?.errors?.['minlength']">
            Password must be at least 8 characters
          </div>
        </div>
      </label>
      <label class="input-group" [for]="ids.securityTokenField"
             [ngClass]="{'error': recoveryPasswordForm.get('securityToken')?.touched &&
                                  recoveryPasswordForm.get('securityToken')?.dirty &&
                                  recoveryPasswordForm.get('securityToken')?.invalid
             }"
      >
        <span class="label-text tooltip-trigger">
          Security Token
          <i class="tooltip">?<span class="tooltip-text">Tooltip text</span></i>
        </span>
        <div class="input-wrapper">
          <input kas-form-item
                 type="text"
                 [id]="ids.securityTokenField"
                 name="securityToken"
                 formControlName="securityToken"
                 placeholder="Security Token"
          >
        </div>
        <div *ngIf="recoveryPasswordForm.get('securityToken')?.touched &&
                    recoveryPasswordForm.get('securityToken')?.dirty &&
                    recoveryPasswordForm.get('securityToken')?.invalid"
             class="alert alert-danger"
        >
          <div *ngIf="recoveryPasswordForm.get('securityToken')?.errors?.['required']">
            Security Token is required.
          </div>
          <div *ngIf="recoveryPasswordForm.get('securityToken')?.errors?.['minlength']">
            Security Token must be at least
            {{recoveryPasswordForm.get('securityToken')?.errors?.['minlength']?.['requiredLength']}}
            characters , now only
            {{recoveryPasswordForm.get('securityToken')?.errors?.['minlength']?.['actualLength']}}
          </div>
        </div>
      </label>
      <div class="btn-holder">
        <button kas-cta-primary
                type="submit"
                class="btn"
                [id]="ids.submitButton"
                [activeClass]="recoveryPasswordForm.valid"
                [disabled]="!recoveryPasswordForm.valid || isDisabled || submitted"
                [class.disabled]="!recoveryPasswordForm.valid || isDisabled || submitted"
        ><span class="cta-content">Submit</span>
        </button>
      </div>
    </fieldset>
  </form>
</ng-container>
